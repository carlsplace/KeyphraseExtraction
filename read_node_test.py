# coding: utf-8

import SSKE as sske

kdd10001128_abs = """
Entity_NN discovery_NN and_CC assignment_NN for_IN opinion_NN mining_NN applications_NNS
Opinion_NN mining_NN became_VBD an_DT important_JJ topic_NN of_IN study_NN in_IN recent_JJ years_NNS due_JJ to_TO its_PRP$ wide_JJ range_NN of_IN applications_NNS ._.
There_EX are_VBP also_RB many_JJ companies_NNS offering_VBG opinion_NN mining_NN services_NNS ._.
One_CD problem_NN that_WDT has_VBZ not_RB been_VBN studied_VBN so_RB far_RB is_VBZ the_DT assignment_NN of_IN entities_NNS that_WDT have_VBP been_VBN talked_VBN about_IN in_IN each_DT sentence_NN ._.
Let_VB us_PRP use_VB forum_NN discussions_NNS about_IN products_NNS as_IN an_DT example_NN to_TO make_VB the_DT problem_NN concrete_NN ._.
In_IN a_DT typical_JJ discussion_NN post_NN ,_, the_DT author_NN may_MD give_VB opinions_NNS on_IN multiple_JJ products_NNS and_CC also_RB compare_VB them_PRP ._.
The_DT issue_NN is_VBZ how_WRB to_TO detect_VB what_WP products_NNS have_VBP been_VBN talked_VBN about_IN in_IN each_DT sentence_NN ._.
If_IN the_DT sentence_NN contains_VBZ the_DT product_NN names_NNS ,_, they_PRP need_VBP to_TO be_VB identified_VBN ._.
We_PRP call_VBP this_DT problem_NN entity_NN discovery_NN ._.
If_IN the_DT product_NN names_NNS are_VBP not_RB explicitly_RB mentioned_VBN in_IN the_DT sentence_NN but_CC are_VBP implied_VBN due_JJ to_TO the_DT use_NN of_IN pronouns_NNS and_CC language_NN conventions_NNS ,_, we_PRP need_VBP to_TO infer_VB the_DT products_NNS ._.
We_PRP call_VBP this_DT problem_NN entity_NN assignment_NN ._.
These_DT problems_NNS are_VBP important_JJ because_IN without_IN knowing_VBG what_WP products_NNS each_DT sentence_NN talks_NNS about_IN the_DT opinion_NN mined_VBN from_IN the_DT sentence_NN is_VBZ of_IN little_JJ use_NN ._.
In_IN this_DT paper_NN ,_, we_PRP study_VBD these_DT problems_NNS and_CC propose_VBP two_CD effective_JJ methods_NNS to_TO solve_VB the_DT problems_NNS ._.
Entity_NN discovery_NN is_VBZ based_VBN on_IN pattern_NN discovery_NN and_CC entity_NN assignment_NN is_VBZ based_VBN on_IN mining_NN of_IN comparative_JJ sentences_NNS ._.
Experimental_JJ results_NNS using_VBG a_DT large_JJ number_NN of_IN forum_NN posts_NNS demonstrate_VBP the_DT effectiveness_NN of_IN the_DT technique_NN ._.
Our_PRP$ system_NN has_VBZ also_RB been_VBN successfully_RB tested_VBN in_IN a_DT commercial_JJ setting_NN ._.
"""

raw_node = """
10001128 - problem entiti assign: NN_NN_NN,0.9607190917381204,1,0.6498054474708171,167,0,0,0,0.0,-1
10001128 - assign: NN,1.6676406585122987,1,0.01556420233463035,4,1,0,1,16.172788204220637,-1
10001128 - servic: NNS,0.31631059080714174,0,0.14007782101167315,36,0,0,0,19.7394509424957,-1
10001128 - experiment result: JJ_NNS,0.24022978932108513,0,0.8988326848249028,231,0,0,0,21.112458636922067,-1
10001128 - sentenc talk: NN_NNS,0.9607190917381204,1,0.7042801556420234,181,0,0,1,48.84189324095991,-1
10001128 - applic opinion: NNS_NN,0.9607190917381204,1,0.0311284046692607,8,1,0,0,0.0,-1
10001128 - languag: NN,0.261027691745133,0,0.5992217898832685,154,0,0,1,20.299786099563125,-1
10001128 - multipl product: JJ_NNS,0.9607190917381204,1,0.3463035019455253,89,0,0,0,0.0,-1
10001128 - forum post: NN_NNS,0.8616980659438425,1,0.9260700389105059,238,0,0,0,39.72830003755216,-1
10001128 - forum discus: NN_NNS,0.9607190917381204,1,0.2490272373540856,64,0,0,1,48.84189324095991,-1
10001128 - rang: NN,0.22619572652345468,0,0.0933852140077821,24,0,0,0,16.052724620459575,-1
10001128 - problem entiti discoveri: NN_NN_NN,0.9607190917381204,1,0.5019455252918288,129,0,0,0,0.0,-1
10001128 - year: NNS,0.188265981529532,0,0.07392996108949416,19,1,0,0,15.436121901150543,-1
10001128 - opinion: NN,2.1170239474809147,1,0.023346303501945526,6,1,1,1,42.95717739156161,-1
10001128 - recent year: JJ_NNS,0.28922189662491804,0,0.07003891050583658,18,1,0,0,18.615841400630092,-1
10001128 - topic: NN,0.18017169102017608,0,0.054474708171206226,14,1,0,0,12.13748026503762,-1
10001128 - mine applic: NN_NNS,0.3856688502045276,0,0.027237354085603113,7,1,0,0,23.155761131986033,-1
10001128 - opinion mine applic: NN_NN_NNS,0.9607190917381204,1,0.023346303501945526,6,1,0,0,0.0,-1
10001128 - compani: NNS,0.38824292241919595,0,0.1245136186770428,32,0,0,0,21.429456123538632,-1
10001128 - pronoun: NNS,0.8616980659438425,1,0.5914396887159533,152,0,0,1,44.16731360359965,-1
10001128 - conven: NNS,0.7307993899618204,1,0.603112840466926,155,0,0,0,22.200193498856635,-1
10001128 - number: NN,0.0471102920073419,0,0.9182879377431906,236,0,1,0,9.255295646045381,-1
10001128 - discoveri: NN,0.6809395162510414,1,0.007782101167315175,2,1,0,0,13.628181406178314,-1
10001128 - import topic: JJ_NN,0.6057324274826917,1,0.05058365758754864,13,1,0,0,28.3954466613273,-1
10001128 - product name: NN_NNS,1.723396131887685,1,0.45525291828793774,117,0,0,1,36.95571131531238,-1
10001128 - system: NN,0.10515317503956845,0,0.9649805447470817,248,0,0,1,12.755979869119622,-1
10001128 - entiti: NN,1.5987610609758602,1,0.0038910505836575876,1,1,1,1,48.0696356877057,-1
10001128 - mine applic opinion: NN_NNS_NN,0.9607190917381204,1,0.027237354085603113,7,1,0,0,0.0,-1
10001128 - applic opinion mine: NNS_NN_NN,0.9607190917381204,1,0.0311284046692607,8,1,0,0,0.0,-1
10001128 - compar sentenc: JJ_NNS,0.8037744790712475,1,0.8871595330739299,228,0,1,1,50.56817365800081,-1
10001128 - result: NNS,0.0519615949419782,0,0.9027237354085603,232,0,0,1,9.326690699550563,-1
10001128 - languag conven: NN_NNS,0.9607190917381204,1,0.5992217898832685,154,0,0,0,0.0,-1
10001128 - forum: NN,1.1292699771220176,1,0.2490272373540856,64,0,0,1,36.3652439908809,-1
10001128 - entiti assign: NN_NN,1.723396131887685,1,0.6536964980544747,168,0,0,1,39.72830003755216,-1
10001128 - set: NN,0.033472872523476485,0,1.0,257,0,0,0,6.895422503564825,-1
10001128 - paper: NN,0.030257647322076534,0,0.7665369649805448,197,0,0,0,9.730606875183248,-1
10001128 - problem entiti: NN_NN,1.9214381834762408,1,0.5019455252918288,129,0,0,0,0.0,-1
10001128 - issu: NN,0.15422667778908644,0,0.377431906614786,97,0,0,0,14.72839906851423,-1
10001128 - applic: NNS,0.12226409206654491,0,0.0311284046692607,8,1,0,1,14.75403552813506,-1
10001128 - mine servic: NN_NNS,0.9607190917381204,1,0.13618677042801555,35,0,0,0,0.0,-1
10001128 - author: NN,0.17717667266802684,0,0.32684824902723736,84,0,0,1,21.332088368936482,-1
10001128 - opinion mine: NN_NN,1.817197282448075,1,0.023346303501945526,6,1,1,1,45.95345425581096,-1
10001128 - discus post: NN_NN,0.9607190917381204,1,0.311284046692607,80,0,0,0,0.0,-1
10001128 - problem concret: NN_NN,0.9607190917381204,1,0.28793774319066145,74,0,0,0,0.0,-1
10001128 - name: NNS,0.8213960115590812,1,0.4591439688715953,118,0,1,1,23.193850923317743,-1
10001128 - concret: NN,0.7626770401495646,1,0.2918287937743191,75,0,0,0,26.259116717606265,-1
10001128 - mine: NN,0.22385943658694413,0,0.027237354085603113,7,1,1,1,13.714932820341884,-1
10001128 - talk: NNS,0.6636560143552866,1,0.708171206225681,182,0,0,1,42.25021950895126,-1
10001128 - typic discus post: JJ_NN_NN,0.9607190917381204,1,0.30739299610894943,79,0,0,0,0.0,-1
10001128 - post: NN,0.8975756296316378,1,0.3151750972762646,81,0,0,0,20.545137855165198,-1
10001128 - larg number: JJ_NN,0.264262331280813,0,0.914396887159533,235,0,1,0,18.208710623390324,-1
10001128 - problem: NN,0.19561480390461747,0,0.1517509727626459,39,0,0,1,12.010016739013192,-1
10001128 - pattern discoveri: NN_NN,0.43020879649464777,0,0.8482490272373541,218,0,0,0,23.69896729662228,-1
10001128 - entiti discoveri: NN_NN,2.882157275214361,1,0.0038910505836575876,1,1,0,0,0.0,1
10001128 - commerci set: JJ_NN,0.9607190917381204,1,0.9961089494163424,256,0,0,0,0.0,-1
10001128 - effect method: JJ_NNS,0.6057324274826917,1,0.8015564202334631,206,0,0,0,30.13671894635868,-1
10001128 - techniqu: NN,0.05621882746759308,0,0.953307392996109,245,0,0,1,8.519462772563692,-1
10001128 - product: NNS,1.6945957207744073,1,0.2607003891050584,67,0,0,1,42.99490158069708,-1
10001128 - discus: NNS,0.5732956488204994,1,0.2529182879377432,65,0,0,1,28.302835510674328,-1
10001128 - effect: NN,0.167993936753089,0,0.9416342412451362,242,0,0,0,12.53653838565244,-1
10001128 - pattern: NN,0.10479558500840866,0,0.8482490272373541,218,0,0,1,8.776090846794899,-1
10001128 - sentenc: NN,3.0114615754625347,1,0.22957198443579765,59,0,1,1,56.86891182049313,-1
10001128 - opinion mine servic: NN_NN_NNS,0.9607190917381204,1,0.13229571984435798,34,0,0,0,0.0,-1
10001128 - method: NNS,0.028571997760482946,0,0.8054474708171206,207,0,1,1,13.0028477294828,-1
10001128 - wide rang: JJ_NN,0.3831403391903275,0,0.08949416342412451,23,0,0,0,21.957695011590896,-1
10001128 - typic discus: JJ_NN,0.9607190917381204,1,0.30739299610894943,79,0,0,0,0.0,-1
10001128 - studi: NN,0.10057289897390231,0,0.0622568093385214,16,1,1,1,8.6221599248112,-1
"""


def get_tagged_tokens(file_text):
    file_splited = file_text.split()
    tagged_tokens = []
    for token in file_splited:
        tagged_tokens.append(tuple(token.split('_')))
    return tagged_tokens


ACCEPTED_TAGS = ['NN', 'NNS', 'NNP', 'NNPS', 'JJ']

tagged_tokens = get_tagged_tokens(kdd10001128_abs)
filtered_text = sske.get_filtered_text(tagged_tokens, ACCEPTED_TAGS)
print(filtered_text)

# exampl